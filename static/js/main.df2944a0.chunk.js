(this["webpackJsonpisrael-sneakers"]=this["webpackJsonpisrael-sneakers"]||[]).push([[0],{42:function(e,t,r){},69:function(e,t,r){},71:function(e,t,r){},72:function(e,t,r){},73:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r.n(c),a=r(36),i=r.n(a),s=(r(42),r(43),r(12)),o=r(3),l=r(26),d=r(9),u=r(4),j=r.n(u),m=r(6),b=r(5),h=r(10),x=r.n(h),f=(r(69),r(1)),p=function(e){var t=e.image,r=e.title,c=e.description,a=n.a.useContext(S).setCartOpened;return Object(f.jsxs)("div",{className:"cartEmpty d-flex align-center justify-center flex-column flex",children:[Object(f.jsx)("img",{className:"mb-20",width:"120px",src:t,alt:"Empty"}),Object(f.jsx)("h2",{children:r}),Object(f.jsx)("p",{className:"opacity-6",children:c}),Object(f.jsxs)("button",{onClick:function(){return a(!1)},className:"greenButton",children:[Object(f.jsx)("img",{src:"/img/arrow.svg",alt:"Arrow"}),"Go back"]})]})},g=function(){var e=n.a.useContext(S),t=e.cartItems,r=e.setCartItems,c=t.reduce((function(e,t){return Number(t.price)+Number(e)}),0);return{cartItems:t,setCartItems:r,totalPrice:c}},O=function(e){return new Promise((function(t,r){return setTimeout(t,e)}))};var v=function(e){var t=e.onClose,r=e.onRemove,c=e.items,a=void 0===c?[]:c,i=g(),s=i.cartItems,o=i.setCartItems,l=i.totalPrice,d=n.a.useState(!1),u=Object(b.a)(d,2),h=u[0],v=u[1],k=n.a.useState(0),N=Object(b.a)(k,2),w=N[0],C=N[1],y=n.a.useState(!1),I=Object(b.a)(y,2),S=(I[0],I[1]),U=function(){var e=Object(m.a)(j.a.mark((function e(){var t,r,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,x.a.post("https://630e591337925634187bff3c.mockapi.io/orders",{items:s});case 4:t=e.sent,r=t.data,C(r.id),v(!0),o([]),c=0;case 10:if(!(c<s.length)){e.next=19;break}return n=s[c],e.next=14,x.a.delete("https://630e591337925634187bff3c.mockapi.io/cart/"+n.id);case 14:return e.next=16,O(1e3);case 16:c++,e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),alert("cant send order try in few minutes");case 24:S(!1);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"drawer__overlay",children:Object(f.jsxs)("div",{className:"drawer",children:[Object(f.jsxs)("h2",{className:"d-flex justify-between mb-30",children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430 ",Object(f.jsx)("img",{onClick:t,className:"cu-p",src:"img/btn-remove.svg",alt:"Close"})]}),a.length>0?Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"items",children:a.map((function(e){return Object(f.jsxs)("div",{className:"cartItem d-flex align-center mb-20 ",payload:e.id,children:[Object(f.jsx)("div",{style:{backgroundImage:"url(".concat(e.imageUrl,")")},className:"cartItemImg"}),Object(f.jsxs)("div",{className:"mr-20 flex",children:[Object(f.jsx)("p",{className:"mb-5",children:e.title}),Object(f.jsxs)("b",{children:[Math.round(e.price)," ","\u20aa"]})]}),Object(f.jsx)("img",{onClick:function(){return r(e.id)},className:"removeBtn",src:"img/btn-remove.svg",alt:"Remove"})]},e.id)}))}),Object(f.jsxs)("div",{className:"cartTotalBlock",children:[Object(f.jsxs)("ul",{children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{children:"Total price:"}),Object(f.jsx)("div",{}),Object(f.jsxs)("b",{children:[l," ","\u20aa"]})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{children:"Tax 17%:"}),Object(f.jsx)("div",{}),Object(f.jsxs)("b",{children:[Math.round(l/100*5)," ","\u20aa"]})]})]}),Object(f.jsxs)("button",{onClick:U,className:"greenButton",children:["Process order ",Object(f.jsx)("img",{src:"img/arrow.svg",alt:"Arrow"})]})]})]}):Object(f.jsx)(p,{image:h?"img/complete-cart.png":"img/emptyCart.svg",title:h?"Order complete!":"Cart is empty",description:h?"You will get your order number ".concat(w," soon!"):"Add at least one item to process the order."})]})})};var k=function(e){var t=g().totalPrice;return Object(f.jsxs)("header",{className:"d-flex justify-between align-center p-40",children:[Object(f.jsx)(s.b,{to:"https://kriptio-root.github.io/Israeli-Sneakers/",children:Object(f.jsxs)("div",{className:"d-flex align-center",children:[Object(f.jsx)("img",{width:40,height:40,src:"img/logo.png",alt:"logo"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{className:"text-uppercase",children:"Israel Sneakers"}),Object(f.jsx)("p",{className:"opacity-5",children:"Best sneakers shop in israel"})]})]})}),Object(f.jsxs)("ul",{className:"d-flex",children:[Object(f.jsxs)("li",{onClick:e.onClickCart,className:"mr-30 cu-p",children:[Object(f.jsx)("img",{width:18,height:18,src:"img/cart.svg",alt:"cartImage"}),Object(f.jsxs)("span",{children:[t," ","\u20aa"," "]})]}),Object(f.jsx)(s.b,{to:"/favorites",children:Object(f.jsx)("li",{className:"mr-15 cu-p",children:Object(f.jsx)("img",{width:18,height:18,src:"img/heart.svg",alt:"favoritesHeart"})})}),Object(f.jsx)(s.b,{to:"/orders",children:Object(f.jsx)("li",{children:Object(f.jsx)("img",{width:18,height:18,src:"img/user.svg",alt:"userProfile"})})})]})]})},N=r(37);r(71);var w=function(e){var t=e.title,r=e.imageUrl,c=e.price,a=e.onFavorite,i=e.onPlus,s=e.id,o=e.favorited,l=void 0!==o&&o,d=e.added,u=void 0!==d&&d,j=e.loading,m=void 0===j||j,h=n.a.useState(u),x=Object(b.a)(h,2),p=(x[0],x[1],n.a.useState(l)),g=Object(b.a)(p,2),O=g[0],v=g[1],k={id:s,parentId:s,title:t,imageUrl:r,price:c},w=n.a.useContext(S),C=w.isItemAdded;return w.isAddedToFavorites,Object(f.jsx)("div",{className:"card",children:m?Object(f.jsxs)(N.a,{speed:2,width:155,height:250,viewBox:"0 0 155 265",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(f.jsx)("rect",{x:"1",y:"0",rx:"10",ry:"10",width:"155",height:"155"}),Object(f.jsx)("rect",{x:"0",y:"167",rx:"5",ry:"5",width:"155",height:"15"}),Object(f.jsx)("rect",{x:"0",y:"187",rx:"5",ry:"5",width:"100",height:"15"}),Object(f.jsx)("rect",{x:"1",y:"234",rx:"5",ry:"5",width:"80",height:"25"}),Object(f.jsx)("rect",{x:"124",y:"230",rx:"10",ry:"10",width:"32",height:"32"})]}):Object(f.jsxs)(f.Fragment,{children:[a&&Object(f.jsx)("div",{className:"favorite",onClick:function(){a(k),v(!O)},children:Object(f.jsx)("img",{src:O?"img/heart-liked.svg":"img/heart-unliked.svg",alt:"Unliked"})}),Object(f.jsx)("img",{width:"100%",height:135,src:r,alt:r.toString()}),Object(f.jsx)("h5",{children:t}),Object(f.jsxs)("div",{className:"d-flex justify-between align-center",children:[Object(f.jsxs)("div",{className:"d-flex flex-column",children:[Object(f.jsx)("span",{children:"Price:"}),Object(f.jsxs)("b",{children:[Math.round(c)," ","\u20aa"]})]}),i&&Object(f.jsx)("img",{className:"plus",onClick:function(){i(k)},src:C(s)?"img/btn-checked.svg":"img/btn-plus.svg",alt:"PlusImg"})]})]})})};var C=function(e){e.onFavorite;var t=e.loading,r=e.mockArr,c=e.onPlus,a=(e.added,e.parentId,n.a.useContext(S)),i=a.favorites,s=a.onAddToFavorite;return Object(f.jsxs)("div",{className:"content p-40",children:[Object(f.jsx)("div",{className:"d-flex align-center justify-between mb-40",children:Object(f.jsx)("h1",{children:"My favorites"})}),Object(f.jsx)("div",{className:"d-flex flex-wrap",children:(t?r:i).map((function(e,r){return Object(f.jsx)(w,{title:e.title,price:e.price,imageUrl:e.imageUrl,id:e.id,onFavorite:s,onPlus:c,loading:t,parentId:e.parentId,favorited:!0},r)}))})]})};var y=function(e){var t=e.searchValue,r=e.setSearchValue,c=e.onChangeSearchInput;return Object(f.jsxs)("div",{className:"d-flex align-center justify-between mb-40",children:[Object(f.jsx)("h1",{children:t.length>0&&""!==t.toString()?'Search for request : "'.concat(t,'"'):"All Sneakers"}),Object(f.jsxs)("div",{className:"search-block d-flex",children:[Object(f.jsx)("img",{src:"img/search.svg",alt:"Search"}),Object(f.jsx)("input",{onChange:c,value:t,placeholder:"Search..."}),t&&Object(f.jsx)("img",{onClick:function(){return r("")},className:"clearImg",src:"img/btn-remove.svg",alt:"ClearImg"})]})]})};var I=function(e){e.onFavorite,e.loading;var t=e.mockArr,r=(e.added,n.a.useState([])),c=Object(b.a)(r,2),a=c[0],i=c[1],s=n.a.useState(!0),o=Object(b.a)(s,2),l=o[0],u=o[1];return n.a.useEffect((function(){Object(m.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("https://630e591337925634187bff3c.mockapi.io/orders");case 3:t=e.sent,r=t.data,i(r.reduce((function(e,t){return[].concat(Object(d.a)(e),Object(d.a)(t.items))}),[])),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Erro while sending orders request"),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(f.jsxs)("div",{className:"content p-40",children:[Object(f.jsx)("div",{className:"d-flex align-center justify-between mb-40",children:Object(f.jsx)("h1",{children:"My orders"})}),Object(f.jsx)("div",{className:"d-flex flex-wrap",children:(l?t:a).map((function(e,t){return Object(f.jsx)(w,{title:e.title,price:e.price,imageUrl:e.imageUrl,id:e.id,loading:l,parentId:e.parentId},t)}))})]})},S=n.a.createContext({});var U=function(){var e=n.a.useState([]),t=Object(b.a)(e,2),r=t[0],c=t[1],a=n.a.useState([""]),i=Object(b.a)(a,2),s=i[0],u=i[1],h=n.a.useState([]),p=Object(b.a)(h,2),g=p[0],O=p[1],N=n.a.useState([]),U=Object(b.a)(N,2),P=U[0],A=U[1],F=n.a.useState(!1),T=Object(b.a)(F,2),B=T[0],E=T[1],M=n.a.useState(!0),V=Object(b.a)(M,2),q=V[0],R=V[1],J=[{title:"checking",price:"checking",imageUrl:"/img/sneakers/.jpg",id:"1"},{title:"checking",price:"checking",imageUrl:"/img/sneakers/.jpg",id:"2"},{title:"checking",price:"checking",imageUrl:"/img/sneakers/.jpg",id:"3"},{title:"checking",price:"checking",imageUrl:"/img/sneakers/.jpg",id:"4"},{title:"checking",price:"checking",imageUrl:"/img/sneakers/.jpg",id:"5"},{title:"checking",price:"checking",imageUrl:"/img/sneakers/.jpg",id:"6"},{title:"checking",price:"checking",imageUrl:"/img/sneakers/.jpg",id:"7"},{title:"checking",price:"checking",imageUrl:"/img/sneakers/.jpg",id:"8"}];n.a.useEffect((function(){function e(){return(e=Object(m.a)(j.a.mark((function e(){var t,r,n,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,Promise.all([x.a.get("https://630e591337925634187bff3c.mockapi.io/items"),x.a.get("https://630e591337925634187bff3c.mockapi.io/cart"),x.a.get("https://630e591337925634187bff3c.mockapi.io/favorites")]);case 4:t=e.sent,r=Object(b.a)(t,3),n=r[0],a=r[1],i=r[2],R(!1),A(a.data),O(i.data),c(n.data),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),alert("Error while sending data  request");case 18:R(!1);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var L=function(){var e=Object(m.a)(j.a.mark((function e(t){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!g.find((function(e){return Number(e.id)===Number(t.id)}))){e.next=6;break}x.a.delete("https://630e591337925634187bff3c.mockapi.io/favorites/".concat(t.id)),O((function(e){return e.filter((function(e){return Number(e.id)!==Number(t.id)}))})),e.next=11;break;case 6:return e.next=8,x.a.post("https://630e591337925634187bff3c.mockapi.io/favorites",t);case 8:r=e.sent,c=r.data,O((function(e){return[].concat(Object(d.a)(e),[c])}));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),alert("cant add to favorites,try it now"),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(m.a)(j.a.mark((function e(t){var r,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=P.find((function(e){return Number(e.parentId)===Number(t.id)})))){e.next=8;break}return A((function(e){return e.filter((function(e){return Number(e.parentId)!==Number(t.id)}))})),e.next=6,x.a.delete("https://630e591337925634187bff3c.mockapi.io/cart/".concat(r.id));case 6:e.next=14;break;case 8:return A((function(e){return[].concat(Object(d.a)(e),[t])})),e.next=11,x.a.post("https://630e591337925634187bff3c.mockapi.io/cart",t);case 11:c=e.sent,n=c.data,A((function(e){return e.map((function(e){return e.parentId===n.parentId?Object(l.a)(Object(l.a)({},e),{},{id:n.id}):e}))}));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),alert("Cant add to cart"),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),G=function(e){return g.find((function(t){return Number(t.parentId)===Number(e)}))};return Object(f.jsx)(S.Provider,{value:{items:r,favorites:g,setCartOpened:E,setCartItems:A,cartItems:P,isItemAdded:function(e){return P.some((function(t){return Number(t.parentId)===Number(e)}))},isAddedToFavorites:G,onAddToFavorite:L,onAddToCart:_},children:Object(f.jsxs)("div",{className:"wrapper clear",children:[B&&Object(f.jsx)(v,{items:P,onClose:function(){return E(!1)},onRemove:function(e){try{x.a.delete("https://630e591337925634187bff3c.mockapi.io/cart/".concat(e)),A((function(t){return t.filter((function(t){return Number(t.id)!==Number(e)}))}))}catch(t){alert("Cant remove from cart"),console.error(t)}}}),Object(f.jsx)(k,{onClickCart:function(){return E(!0)}}),Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{path:"*",exact:!0,element:Object(f.jsxs)("div",{className:"content p-40",children:[Object(f.jsx)(y,{searchValue:s,setSearchValue:u,onChangeSearchInput:function(e){u(e.target.value)}}),Object(f.jsx)("div",{className:"d-flex flex-wrap",children:function(){var e=r.filter((function(e){return e.title.toString().toLowerCase().includes(s.toString().toLowerCase())}));return(q?J:e).map((function(e,t){return Object(f.jsx)(w,{title:e.title,price:e.price,imageUrl:e.imageUrl,id:e.id,onFavorite:function(e){return L(e)},onPlus:function(e){return _(e)},loading:q,parentId:e.parentId,favorited:G(e.id)},t)}))}()})]})}),Object(f.jsx)(o.a,{path:"favorites",exact:!0,element:Object(f.jsx)(C,{mockArr:J,loading:q,onFavorite:function(e){return L(e)},onPlus:function(e){return _(e)}})}),Object(f.jsx)(o.a,{path:"orders",exact:!0,element:Object(f.jsx)(I,{mockArr:J,loading:q,onFavorite:function(e){return L(e)},onPlus:function(e){return _(e)}})})]})]})})};r(72);var P=function(){return Object(f.jsx)(s.a,{children:Object(f.jsx)(o.c,{children:Object(f.jsx)(o.a,{path:"*",element:Object(f.jsx)(U,{})})})})};i.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.df2944a0.chunk.js.map